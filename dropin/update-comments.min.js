document.addEventListener('DOMContentLoaded',function(){const DISCOURSE_URL='https://forum.mygreatblog.com/',COMMENT_SELECTOR='article .meta-comment',NUMBER_SELECTOR='.meta-count',TEXT_SELECTOR='.meta-plural',TEXT_SINGULAR=' comment',TEXT_PLURAL=' comments';document.querySelectorAll(COMMENT_SELECTOR).forEach((a)=>{fetch(`${DISCOURSE_URL}/t/${a.dataset.topicSlug}.json`).then((b)=>b.ok?true:Promise.reject(b.statusText)).then((b)=>b.json()).then((b)=>(b&&b.posts_count&&Number(b.posts_count)-1>=0)?Promise.resolve(b.posts_count-1):Promise.reject('Unable to fetch comment count')).then((b)=>{a.querySelector(NUMBER_SELECTOR).innerText=b;a.querySelector(TEXT_SELECTOR).innerText=(b==1)?TEXT_SINGULAR:TEXT_PLURAL})})})